@page
@model GlobalPaymentFraudDetection.Pages.Settings.IndexModel
@{
    ViewData["Title"] = "Settings";
}

<div class="container-fluid">
    <div class="row mb-4">
        <div class="col-12">
            <div class="page-header">
                <h1>Settings</h1>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/Dashboard">Dashboard</a></li>
                        <li class="breadcrumb-item active">Settings</li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-3 mb-4">
            <div class="card">
                <div class="card-body">
                    <div class="list-group list-group-flush">
                        <a href="#notifications" class="list-group-item list-group-item-action active" data-bs-toggle="list">
                            <i class="bi bi-bell"></i> Notifications
                        </a>
                        <a href="#alert-rules" class="list-group-item list-group-item-action" data-bs-toggle="list">
                            <i class="bi bi-exclamation-triangle"></i> Alert Rules
                        </a>
                        <a href="#webhooks" class="list-group-item list-group-item-action" data-bs-toggle="list">
                            <i class="bi bi-link-45deg"></i> Webhooks
                        </a>
                        <a href="#api-keys" class="list-group-item list-group-item-action" data-bs-toggle="list">
                            <i class="bi bi-key"></i> API Keys
                        </a>
                        <a href="#preferences" class="list-group-item list-group-item-action" data-bs-toggle="list">
                            <i class="bi bi-gear"></i> Preferences
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-9">
            <div class="tab-content">
                <div class="tab-pane fade show active" id="notifications">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="bi bi-bell"></i> Notification Settings</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-4">
                                <h6 class="mb-3">Email Notifications</h6>
                                <div class="form-check form-switch mb-3">
                                    <input class="form-check-input" type="checkbox" id="emailHighRisk" checked>
                                    <label class="form-check-label" for="emailHighRisk">
                                        <strong>High Risk Transactions</strong>
                                        <br><small class="text-muted">Get notified when fraud score exceeds 80%</small>
                                    </label>
                                </div>
                                <div class="form-check form-switch mb-3">
                                    <input class="form-check-input" type="checkbox" id="emailDaily">
                                    <label class="form-check-label" for="emailDaily">
                                        <strong>Daily Summary</strong>
                                        <br><small class="text-muted">Receive daily fraud detection summary</small>
                                    </label>
                                </div>
                                <div class="form-check form-switch mb-3">
                                    <input class="form-check-input" type="checkbox" id="emailWeekly" checked>
                                    <label class="form-check-label" for="emailWeekly">
                                        <strong>Weekly Reports</strong>
                                        <br><small class="text-muted">Weekly analytics and insights report</small>
                                    </label>
                                </div>
                            </div>

                            <hr>

                            <div class="mb-4">
                                <h6 class="mb-3">SMS Notifications (Twilio)</h6>
                                <div class="form-check form-switch mb-3">
                                    <input class="form-check-input" type="checkbox" id="smsCritical" checked>
                                    <label class="form-check-label" for="smsCritical">
                                        <strong>Critical Alerts</strong>
                                        <br><small class="text-muted">Fraud score above 90% or suspicious patterns</small>
                                    </label>
                                </div>
                                <div class="mb-3">
                                    <label for="phoneNumber" class="form-label">Phone Number</label>
                                    <input type="tel" class="form-control" id="phoneNumber" placeholder="+1 (555) 123-4567">
                                </div>
                            </div>

                            <button class="btn btn-primary">
                                <i class="bi bi-check-circle"></i> Save Notification Settings
                            </button>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="alert-rules">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0"><i class="bi bi-exclamation-triangle"></i> Custom Alert Rules</h5>
                            <button class="btn btn-sm btn-primary">
                                <i class="bi bi-plus-circle"></i> Add Rule
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="list-group">
                                <div class="list-group-item">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <h6 class="mb-1">High Value Transaction</h6>
                                            <p class="mb-0 text-muted"><small>Alert when transaction > $5,000</small></p>
                                        </div>
                                        <div class="d-flex gap-2 align-items-center">
                                            <span class="badge bg-success">Active</span>
                                            <button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i></button>
                                            <button class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></button>
                                        </div>
                                    </div>
                                </div>
                                <div class="list-group-item">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <h6 class="mb-1">Multiple Failed Attempts</h6>
                                            <p class="mb-0 text-muted"><small>Alert when > 3 failed attempts in 10 minutes</small></p>
                                        </div>
                                        <div class="d-flex gap-2 align-items-center">
                                            <span class="badge bg-success">Active</span>
                                            <button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i></button>
                                            <button class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></button>
                                        </div>
                                    </div>
                                </div>
                                <div class="list-group-item">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <h6 class="mb-1">Geographic Anomaly</h6>
                                            <p class="mb-0 text-muted"><small>Alert on transactions from unusual countries</small></p>
                                        </div>
                                        <div class="d-flex gap-2 align-items-center">
                                            <span class="badge bg-warning">Paused</span>
                                            <button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i></button>
                                            <button class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="webhooks">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0"><i class="bi bi-link-45deg"></i> Webhook Management</h5>
                            <button class="btn btn-sm btn-primary">
                                <i class="bi bi-plus-circle"></i> Add Webhook
                            </button>
                        </div>
                        <div class="card-body">
                            <p class="text-muted mb-4">Configure webhooks to receive real-time fraud detection events</p>
                            <div class="list-group">
                                <div class="list-group-item">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <div>
                                            <h6 class="mb-1">Slack Notifications</h6>
                                            <p class="mb-0 text-muted"><small>https://hooks.slack.com/services/...</small></p>
                                        </div>
                                        <div class="d-flex gap-2 align-items-center">
                                            <span class="badge bg-success">Active</span>
                                            <button class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil"></i></button>
                                            <button class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></button>
                                        </div>
                                    </div>
                                    <div class="mt-2">
                                        <span class="badge bg-info me-1">fraud.detected</span>
                                        <span class="badge bg-info me-1">transaction.declined</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="api-keys">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0"><i class="bi bi-key"></i> API Keys</h5>
                            <button class="btn btn-sm btn-primary">
                                <i class="bi bi-plus-circle"></i> Generate Key
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="alert alert-info">
                                <i class="bi bi-info-circle"></i> Keep your API keys secure. Do not share them publicly.
                            </div>
                            <div class="list-group">
                                <div class="list-group-item">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <h6 class="mb-1">Production Key</h6>
                                            <p class="mb-0"><code>fpd_pk_****************************</code></p>
                                            <small class="text-muted">Created: Oct 1, 2025 | Last used: 2 hours ago</small>
                                        </div>
                                        <div>
                                            <button class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i> Revoke</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="preferences">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="bi bi-gear"></i> General Preferences</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-4">
                                <label for="timezone" class="form-label">Timezone</label>
                                <select class="form-select" id="timezone">
                                    <option selected>UTC (Coordinated Universal Time)</option>
                                    <option>EST (Eastern Standard Time)</option>
                                    <option>PST (Pacific Standard Time)</option>
                                    <option>GMT (Greenwich Mean Time)</option>
                                </select>
                            </div>
                            <div class="mb-4">
                                <label for="dateFormat" class="form-label">Date Format</label>
                                <select class="form-select" id="dateFormat">
                                    <option selected>MM/DD/YYYY</option>
                                    <option>DD/MM/YYYY</option>
                                    <option>YYYY-MM-DD</option>
                                </select>
                            </div>
                            <div class="mb-4">
                                <label for="currency" class="form-label">Default Currency</label>
                                <select class="form-select" id="currency">
                                    <option selected>USD ($)</option>
                                    <option>EUR (€)</option>
                                    <option>GBP (£)</option>
                                    <option>JPY (¥)</option>
                                </select>
                            </div>
                            <button class="btn btn-primary">
                                <i class="bi bi-check-circle"></i> Save Preferences
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.btn-primary').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    if (this.textContent.includes('Save')) {
                        e.preventDefault();
                        showToast('Settings saved successfully!', 'success');
                    }
                });
            });
        });
    </script>
}
